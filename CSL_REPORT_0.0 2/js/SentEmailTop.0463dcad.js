"use strict";(self["webpackChunkcsl_report"]=self["webpackChunkcsl_report"]||[]).push([[292],{7578:function(t,l,e){e.r(l),e.d(l,{default:function(){return j}});var a=e(6768),s=e(5130),o=e(4232);const n={ref:"root",class:"top"},i={class:"filter-wrapper"},c={class:"filter-contents"},r={class:"filter-area"},d={class:"input-wrap"},u={class:"iscroll-wrapper"},p={class:"iscroll__scroller"},h={id:"my-chart",class:"animation-sample01"},y={class:"charts-css bar show-labels show-primary-axis show-6-secondary-axes show-data-axes data-spacing-10 data-outside"},v={style:{width:"100%"}},g={style:{width:"100%"}},k={class:"th"},m=["onTap"],L={class:"data"},f=["onTap"],E={style:{width:"100%"}},w={class:"th"},b=["onTap"],_={class:"data"},T={style:{display:"flex",width:"100%","padding-right":"20px"}},C={style:{display:"flex",width:"calc(100% - 275px)"}};function S(t,l,e,S,x,M){const I=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("div",i,[(0,a.Lk)("div",c,[(0,a.Lk)("div",r,[(0,a.Lk)("div",d,[(0,a.bo)((0,a.Lk)("input",{id:"search",type:"text","onUpdate:modelValue":l[0]||(l[0]=l=>t.state.keyword=l),placeholder:"キーワード検索"},null,512),[[s.Jo,t.state.keyword]]),(0,a.Lk)("div",{class:"search__clear",onTap:l[1]||(l[1]=(...l)=>t.onTapClearButton&&t.onTapClearButton(...l))},null,32)])])])]),(0,a.Lk)("div",u,[(0,a.Lk)("div",p,[(0,a.Lk)("div",h,[(0,a.Lk)("div",y,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.state.data3,((l,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"tbody",style:{"flex-direction":"row"}},[(0,a.bF)(I,{to:{name:"s",query:{imgUrl:e,title:e,text:e}}},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e),1)])),_:2},1032,["to"]),(0,a.Lk)("div",v,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.state.data3[e],((l,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,style:{display:"flex"}},[(0,a.Lk)("div",null,(0,o.v_)(s),1),(0,a.Lk)("div",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.state.data3[e][s],((l,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"tr",style:(0,o.Tr)(t.style)},[(0,a.Lk)("div",k,[(0,a.Lk)("div",null,(0,o.v_)(l.MR),1)]),(0,a.Lk)("div",{class:"td",style:(0,o.Tr)(l.ratio),onTap:e=>t.onTapClearButton2(l)},[(0,a.Lk)("span",L,(0,o.v_)(l.送付数),1)],44,m)],4)))),128))])])))),128))])])))),128)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.state.sentEmailListDetail,((l,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"tbody",style:{"flex-direction":"row"}},[(0,a.Lk)("div",{onTap:l=>t.onTapClearButton2(e)},(0,o.v_)(l.MR),41,f),(0,a.Lk)("div",E,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.詳細2,((l,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"tr",style:(0,o.Tr)(t.state.style)},[(0,a.Lk)("div",w,[(0,a.Lk)("div",null,(0,o.v_)(e),1)]),(0,a.Lk)("div",{class:"td",style:(0,o.Tr)(l.ratio),onTap:e=>t.onTapClearButton2(l)},[(0,a.Lk)("span",_,(0,o.v_)(l.length),1)],44,b)],4)))),128))])])))),128))])])])]),(0,a.Lk)("div",T,[l[2]||(l[2]=(0,a.Lk)("div",{style:{width:"275px","text-align":"right"}},"0",-1)),(0,a.Lk)("div",C,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.state.girdArry,((l,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,style:(0,o.Tr)(t.style2)},(0,o.v_)(l),5)))),128))])])],512)}e(4114);var x=e(144),M=e(5589),I=e.n(M),O=e(1576),X=e.n(O),F=e(9344),B=e(7283),D=e(3408),A=e(8899),K=e(6274);B.t1.register(B.hE,B.m_,B.s$,B.E8,B.PP,B.kc,D.A);var R=(0,a.pM)({components:{},setup(){const t=(0,x.KR)(null),l=(0,x.KR)(null),e=(0,A.B)(),s=(0,K.E)(),o=(0,x.Kh)({iScrollObj:null,activityObj:null,keyword:"",testObj:{channel:{name:"チャネル",list:{"すべて":"すべて","講演会":"講演会","One to One":"One to One","Webサイト":"Webサイト","コール":"コール","スタンプ":"スタンプ","参加ログ":"参加ログ"}},lecture:{name:"講演会名",list:{"すべて":"すべて"}},MR:{name:"MR名",list:{"すべて":"すべて"}},hospital:{name:"医師名",list:{"すべて":"すべて"}}},selectedFilterItems:{channel:null,lecture:null,MR:null,MR2:null,myProduct:null,hospital:null,hospital2:null,startDate:"",endDate:""},accountList:null,accountList2:[],data:null,data2:null,data3:{},sentEmailListDetail:null,options:null,loaded:!1,plugins:null,h:null,emailList:{},girdArry:[],style:null}),n=(0,a.EW)((()=>e.getShouldShowHelpPopup));o.data3=(0,a.EW)((()=>s.getsentEmailList)),o.accountList2=(0,a.EW)((()=>s.getsentEmailAccountList)),console.log(o.data3);o.accountList2.map((t=>t["MR"]));const i=o.accountList2.map((t=>t["送付数"]));let c=Math.max(...i);const r=String(c).length;let d,u,p;console.log(r),r>=4?(c+=100,d=100*Math.ceil(c/100),u=d/100,p=100):3===r?(c+=10,d=10*Math.ceil(c/10),u=d/10,p=10):r<=2&&(c<=20?(d=c+1,u=d/1,p=1):c<=40?(c+=2,d=2*Math.ceil(c/2),u=d/2,p=2):(c+=5,d=5*Math.ceil(c/5),u=d/5,p=5));for(let a=p;a<=d;a+=p)o.girdArry.push(a);for(const a of o.accountList2)a["ratio"]={"--size":`calc( ${a["送付数"]/d*100} / 100 )`};const h={"background-size":`calc(100% / ${u}) 100%`},y={width:`calc(100% / ${u})`,"text-align":"right"};(0,a.sV)((async()=>{o.iScrollObj=new(I())(t.value.querySelector(".iscroll-wrapper"),{scrollX:!1,scrollY:!0,disableTouch:!0,disablePointer:!1,useTransition:!1,scrollbars:"custom",fadeScrollbars:!0,mouseWheel:!0})})),(0,a.$u)((()=>{setTimeout((()=>{o.iScrollObj&&o.iScrollObj.refresh()}),500)}));const v=t=>{o.selectedFilterItems.startDate=X()(t).startOf("day").toISOString()},g=t=>{o.selectedFilterItems.endDate=X()(t).startOf("day").toISOString()},k=t=>t?t.includes("Face_to_face_vod")?"面会":t.includes("Video_vod")?"Web面談":t.includes("Phone_vod")?"電話":t.includes("Email_vod")?"メール":t.includes("Other_vod")?"その他":t:null,m=t=>{o.selectedFilterItems[t.category]="すべて"!==t.selectedValue?t.selectedValue:null,o.selectedFilterItems[`${t.category}2`]="すべて"!==t.selectedValue2?t.selectedValue2:null},L=()=>{o.keyword=""},f=t=>{console.log(t);const l=(0,a.EW)((()=>s.getsentEmailListDetail(t)));console.log(l.value);const e=[];for(const a of l.value)for(const t in a["詳細2"])e.push(a["詳細2"][t].length);const n=e;console.log(n);let i=Math.max(...n);const c=String(i).length;let r,d,u;console.log(c),c>=4?(i+=100,r=100*Math.ceil(i/100),d=r/100,u=100):3===c?(i+=10,r=10*Math.ceil(i/10),d=r/10,u=10):c<=2&&(i<=20?(r=i+1,d=r/1,u=1):i<=40?(i+=2,r=2*Math.ceil(i/2),d=r/2,u=2):(i+=5,r=5*Math.ceil(i/5),d=r/5,u=5)),o.girdArry=[];for(let a=u;a<=r;a+=u)o.girdArry.push(a);for(const a of l.value){for(const t in a["詳細2"])a["詳細2"][t]["ratio"]={"--size":`calc( ${a["詳細2"][t].length/r*100} / 100 )`};a["girdNum"]=d}o.sentEmailListDetail=l.value,console.log(l.value),o.style={"background-size":`calc(100% / ${d}) 100%`},console.log(o.girdArry)},E=async t=>{await(0,F.y)(100);const l=document.getElementById("search");l&&l.blur()};return{state:o,root:t,chart:l,dayjs:X(),style:h,style2:y,shouldShowHelpPopup:n,onTapSelectBoxItem:m,onTapClearButton:L,onTapClearButton2:f,onSelectedStartDate:v,onSelectedEndDate:g,getShareName:k,onTapOutside:E}}}),W=e(1241);const $=(0,W.A)(R,[["render",S],["__scopeId","data-v-6791ab26"]]);var j=$}}]);
//# sourceMappingURL=SentEmailTop.0463dcad.js.map